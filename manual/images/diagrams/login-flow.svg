<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 400" width="700" height="400">
  <defs>
    <marker id="arrow4" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="700" height="400" fill="#f8fafc"/>
  
  <!-- Title -->
  <text x="350" y="30" font-family="Arial, sans-serif" font-size="18" font-weight="600" fill="#1e293b" text-anchor="middle">User Login Flow</text>
  
  <!-- Start -->
  <ellipse cx="100" cy="80" rx="50" ry="25" fill="#22c55e" stroke="#16a34a" stroke-width="2"/>
  <text x="100" y="85" font-family="Arial, sans-serif" font-size="12" font-weight="600" fill="#ffffff" text-anchor="middle">Start</text>
  
  <!-- Arrow -->
  <line x1="100" y1="105" x2="100" y2="130" stroke="#64748b" stroke-width="2" marker-end="url(#arrow4)"/>
  
  <!-- Enter Credentials -->
  <rect x="20" y="130" width="160" height="50" rx="8" fill="#ffffff" stroke="#2563eb" stroke-width="2"/>
  <text x="100" y="155" font-family="Arial, sans-serif" font-size="12" font-weight="600" fill="#1e293b" text-anchor="middle">Enter</text>
  <text x="100" y="172" font-family="Arial, sans-serif" font-size="12" fill="#1e293b" text-anchor="middle">Credentials</text>
  
  <!-- Arrow -->
  <line x1="100" y1="180" x2="100" y2="210" stroke="#64748b" stroke-width="2" marker-end="url(#arrow4)"/>
  
  <!-- Submit Login -->
  <rect x="20" y="210" width="160" height="50" rx="8" fill="#ffffff" stroke="#2563eb" stroke-width="2"/>
  <text x="100" y="235" font-family="Arial, sans-serif" font-size="12" font-weight="600" fill="#1e293b" text-anchor="middle">Submit</text>
  <text x="100" y="252" font-family="Arial, sans-serif" font-size="12" fill="#1e293b" text-anchor="middle">Login Form</text>
  
  <!-- Arrow -->
  <line x1="180" y1="235" x2="250" y2="235" stroke="#64748b" stroke-width="2" marker-end="url(#arrow4)"/>
  
  <!-- Server Side - Validate -->
  <rect x="250" y="205" width="180" height="60" rx="8" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="2"/>
  <text x="340" y="230" font-family="Arial, sans-serif" font-size="12" font-weight="600" fill="#1e293b" text-anchor="middle">Server Validates</text>
  <text x="340" y="250" font-family="Arial, sans-serif" font-size="11" fill="#64748b" text-anchor="middle">Credentials & Generate Token</text>
  
  <!-- Arrow -->
  <line x1="340" y1="265" x2="340" y2="300" stroke="#64748b" stroke-width="2" marker-end="url(#arrow4)"/>
  
  <!-- Decision Diamond -->
  <polygon points="340,300 420,340 340,380 260,340" fill="#ffffff" stroke="#f59e0b" stroke-width="2"/>
  <text x="340" y="345" font-family="Arial, sans-serif" font-size="11" font-weight="600" fill="#1e293b" text-anchor="middle">Valid?</text>
  
  <!-- No - Arrow left -->
  <line x1="260" y1="340" x2="220" y2="340" stroke="#ef4444" stroke-width="2"/>
  <line x1="220" y1="340" x2="220" y2="180" stroke="#ef4444" stroke-width="2"/>
  <line x1="220" y1="180" x2="180" y2="180" stroke="#ef4444" stroke-width="2" marker-end="url(#arrow4)"/>
  
  <!-- Error Message -->
  <rect x="20" y="155" width="160" height="40" rx="8" fill="#fee2e2" stroke="#ef4444" stroke-width="2"/>
  <text x="100" y="180" font-family="Arial, sans-serif" font-size="12" font-weight="600" fill="#ef4444" text-anchor="middle">Show Error</text>
  
  <!-- Loop back -->
  <path d="M 180 195 Q 100 195 100 130" fill="none" stroke="#ef4444" stroke-width="2" stroke-dasharray="5,5"/>
  
  <!-- Yes - Arrow down -->
  <line x1="340" y1="380" x2="340" y2="410" stroke="#22c55e" stroke-width="2"/>
  
  <!-- This would go off screen, so let's show success path -->
  <line x1="340" y1="410" x2="340" y2="430" stroke="#22c55e" stroke-width="2"/>
  <line x1="340" y1="430" x2="500" y2="430" stroke="#22c55e" stroke-width="2"/>
  <line x1="500" y1="430" x2="500" y2="380" stroke="#22c55e" stroke-width="2" marker-end="url(#arrow4)"/>
  
  <!-- Success - Redirect to Dashboard -->
  <rect x="420" y="340" width="160" height="50" rx="8" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
  <text x="500" y="365" font-family="Arial, sans-serif" font-size="12" font-weight="600" fill="#1e293b" text-anchor="middle">Success</text>
  <text x="500" y="382" font-family="Arial, sans-serif" font-size="11" fill="#64748b" text-anchor="middle">Redirect to Dashboard</text>
  
  <!-- Arrow -->
  <line x1="500" y1="390" x2="500" y2="430" stroke="#64748b" stroke-width="2" marker-end="url(#arrow4)"/>
  
  <!-- End -->
  <ellipse cx="500" cy="450" rx="50" ry="25" fill="#ef4444" stroke="#dc2626" stroke-width="2"/>
  <text x="500" y="455" font-family="Arial, sans-serif" font-size="12" font-weight="600" fill="#ffffff" text-anchor="middle">End</text>
  
  <!-- Legend -->
  <g transform="translate(550, 80)">
    <rect x="0" y="0" width="130" height="70" rx="4" fill="#ffffff" stroke="#e2e8f0" stroke-width="1"/>
    <text x="65" y="15" font-family="Arial, sans-serif" font-size="10" font-weight="600" fill="#1e293b" text-anchor="middle">Legend</text>
    <rect x="10" y="25" width="12" height="12" rx="2" fill="#ffffff" stroke="#2563eb" stroke-width="2"/>
    <text x="30" y="35" font-family="Arial, sans-serif" font-size="9" fill="#64748b">Process</text>
    <rect x="10" y="42" width="12" height="12" rx="2" fill="#ffffff" stroke="#f59e0b" stroke-width="2"/>
    <text x="30" y="52" font-family="Arial, sans-serif" font-size="9" fill="#64748b">Decision</text>
    <rect x="70" y="25" width="12" height="12" rx="2" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
    <text x="90" y="35" font-family="Arial, sans-serif" font-size="9" fill="#64748b">Success</text>
    <rect x="70" y="42" width="12" height="12" rx="2" fill="#fee2e2" stroke="#ef4444" stroke-width="2"/>
    <text x="90" y="52" font-family="Arial, sans-serif" font-size="9" fill="#64748b">Error</text>
  </g>
</svg>
